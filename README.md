# exp/user/clustering (v1.2)

## 🧭 目的
ユーザー特徴量でのクラスタリングを実施。

## 🔄 実施内容
- 特徴量に以下を使用
"day_of_week","user_gender","user_age","hour_sin","hour_cos"
"art","fashion","finance","fitness","food","gaming","health","lifestyle","news","photography","sports","technology","travel"
- "day_of_week" をワンホットエンコーディング⇒周期エンコーディングに変更して検証
- カテゴリカル変数として,"user_gender"をワンホットエンコーディング
- k=5 を仮置きで設定
- 標準化＋PCAで2次元化して分布確認
- DBI、CHを評価指標として使用
- 後処理として、年齢、時間、曜日を元に戻して各クラスタの特徴を確認

## ⚙️ 使用データ
- users.csv
- events.csv

## 📊 現状の結果
- DBI：2.662、CH：26674.206 となり、曜日をワンホットエンコーディングでやったときよりも分離がなくなりわずかにスコアは悪化した。
- 各クラスタの特徴は下記の通り
    年齢ではクラスタ0~3は平均 24歳、4のみ41歳
    時間帯の平均値は全て11.5となり傾向差がみられない（平均だけで判断出来ないため、追って指標を追加）
    性別も全クラス 女性34~35%、男性55~56%、その他10%となり差分がなくなった。
    曜日については、クラスタ0が土日のみ、クラスタ1・3が水~金、クラスタ2が月～火、クラスタ4は前曜日均等という分かれ方になった。
    今回、指標は悪化したが、クラスタの分かれ方としては、年齢、及び曜日が影響している結果となった。

## 🚧 今後の課題
### 処理内容
- カテゴリカル変数のエンコーディング方法を見直して再検証
    興味関心のエンコーディングを変更
- 年齢の分布の偏りが大きいので、DBSCANによるクラスタリングも検証

### 確認指標
- 各クラスタのCTR、CVRも確認する
- 時間帯について分布の確認も追加 

## 📝 備考
- branch: `feature/clustering-user-v3.1-draft`
- status: **検証中**
- 最終マージ予定：10/17 ver3