# sns_ads_analyze.py(Ver5.3)

## 概要
SNS広告のクリック・購入データを用いてユーザー・広告のセグメント化を行い、クリック・購入の行動予測を実施。
セグメント別の傾向把握や予測モデルの構築から、成果改善の示唆出しを目的とする。
尚、Kaggleの公開データセットを用いている。
データは若年層向けの総合ファッションECのものと仮定して進める。

## ディレクトリ構成
project/
├─ rawdata/ # 元データ（ads.csv, users.csvなど）
├─ hub/ # ハブスクリプト（sns_ads_pipline.py）、yaml
├─ modules/ # 個別モジュールのPythonスクリプト
├─ outputs/ # 出力ファイル（CSV、画像）
├─ logs/ # 各検証の結果を記録
└─ README.md

## 使用技術
- Python 3.13.7
- numpy / pandas / scikit-learn / matplotlib / seaborn
- Cursor
- Git / GitHub

## 実行方法
sns_ads_pipline.py を実行

## 分析内容
### 実施内容
- ユーザークラスタIDと広告クラスタIDの掛け合わせによるCTR・CVRを可視化


## 分析結果
- CTR

CTR	ad_id				
user_cluster_id	0	1	2	3	4
0	10.39%	9.89%	11.40%	10.54%	10.03%
1	10.39%	10.22%	11.85%	10.69%	9.90%
2	10.59%	10.21%	11.35%	10.90%	9.66%
3	10.17%	10.57%	11.60%	10.77%	9.80%
4	10.59%	9.92%	11.78%	10.32%	10.63%
5	10.39%	10.38%	11.40%	10.37%	10.02%

CVR
CVR	ad_id				
user_cluster_id	0	1	2	3	4
0	6.87%	3.42%	4.61%	2.91%	7.18%
1	6.76%	3.36%	4.85%	3.78%	7.05%
2	5.46%	3.42%	4.86%	3.67%	5.63%
3	5.28%	4.35%	4.76%	3.68%	7.05%
4	5.74%	3.89%	5.31%	3.16%	8.09%
5	6.45%	5.21%	5.23%	3.99%	4.37%


CTR・CVRともにユーザークラスタIDよりも広告クラスタIDの影響が大きいことが分かった。
CTRでは広告クラスタID 2、CVRでは広告クラスタID0、5が高い傾向がみられる。

- 広告クラスタID 2の特徴
    - Instagramの比重が高い
    - 男性比率が高い
    - 興味関心でFitness・Sportsの比率が高い

- 広告クラスタID 0、5の共通の特徴
    - 広告タイプでストーリーズの比率が高い（プラットフォームはFacebookの比重が高い）


### 今後の予定
#### クラスタリング
- CTRにおける広告クラスタの影響に寄与する要因を可視化するため、興味関心を除いたVer・性別を除いたVer・広告プラットフォームを除いたVerでのCTRの変化をそれぞれ検証

#### 行動予測モデル構築
- ツリー系モデルの過学習をまずは抑えるため、パラメータを調整してAUCの変化を検証
- その上で特徴量の加工を検討

## バージョン履歴
**Ver5.3(2025-10-30)**:ユーザークラスタIDｘ広告クラスタIDのCTR・CVRを可視化
**Ver5.2(2025-10-28)**:click予測のスクリプトの特徴量を変更
**Ver5.1(2025-10-27)**:click予測のスクリプトの特徴量を追加
**Ver5.0(2025-10-27)**:click予測のスクリプトを追加
**Ver4(2025-10-24)**:ファイル・ディレクトリ構成を変更（各スクリプトをモジュール化）
**Ver3(2025-10-18)**:全レコードを対象にデータの前処理を実行。その後テストデータと訓練データに分割
**Ver2(2025-10-17)**:コーディングの仕様変更（#%%を用いた記述に変更。特徴量の分布確認などを実行）
**Ver1(2025-10-15)**:初回（データの読み込み・統合・データの前処理）

## ライセンス
BSD 3-Clause License